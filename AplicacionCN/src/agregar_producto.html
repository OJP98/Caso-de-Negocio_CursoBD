<!DOCTYPE html>
<html lang="en">

<!-- Datos del head -->

<head>
    <meta charset="utf-8">
    <title>Agregar Producto</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="Fns.js"></script>

</head>

<!-- Barra de navegación -->
<nav class="fixed-nav-bar">
    <div class="nav-wrapper">
        <a id="nombreDeLaTienda" href="index.html" class="brand-logo center"></a>
        <ul class="left hide-on-med-and-down">
            <li><a href="index.html"><i class="material-icons">keyboard_backspace</i></a></li>
        </ul>
    </div>
</nav>

<body>

    <h4 class="center">Agregar un producto</h4>

    <br>

    <div class="container">

        <!-- Espacio para ingresar nombre y precio -->
        <div class="row">

            <h5>Datos generales del producto</h5>

            <form id="generalesForm">
                <!-- Datalist para ingresar una categoría -->
                <div class="input-field col s6">
                    <input id="categoriasInput" list="categorias" placeholder="Seleccione una categoría" required>
                    <datalist id="categorias">
                    </datalist>
                </div>

                <!-- Datalist para ingresar una categoría -->
                <div class="input-field col s6">
                    <input id="marcasInput" list="marcas" placeholder="Seleccione una marca" required>
                    <datalist id="marcas">
                    </datalist>
                </div>

                <!-- Input del nombre del producto -->
                <div class="input-field col s6">
                    <input id="nombre_prod" type="text" class="validate" value="" required>
                    <label for="nombre_prod">Nombre del producto</label>
                    <span class="helper-text" data-error="El nombre tiene que existir"></span>
                </div>

                <!-- Input del precio del producto -->
                <div class="input-field col s6">
                    <input id="precio_prod" type="number" class="validate" value="" min="1" step=".01" required>
                    <label for="precio_prod">Precio del producto</label>
                    <span class="helper-text" data-error="El precio debe ser mayor a 0" data-success="">En
                        quetzales</span>
                </div>

            </form>
        </div>

        <!-- Botones para guardar y cancelar las propiedades del producto -->
        <div class="center">
            <a id="continuarBtn" style="margin: 15px" class="waves-effect waves-light btn">
                <i class="material-icons right">navigate_next</i>Continuar</a>
        </div>

        <!-- Propiedades de cada producto -->
        <div id="propiedades" style="display:none">
            <h5>Propiedades del producto</h5>
            <br>

            <!-- Input del nombre de la propiedad -->
            <div class="row">
                <form id="propiedadesForm" class="col s12">
                </form>

            </div>

            <!-- Botones para guardar y cancelar las propiedades del producto -->
            <div class="center">
                <a id="guardarBtn" style="margin: 15px" class="waves-effect waves-light btn">
                    <i class="material-icons right">save_alt</i>Guardar</a>
                <a id="cancelarBtn2" style="margin: 15px" class="waves-effect waves-light btn">
                    <i class="material-icons right">cancel</i>Cancelar</a>
            </div>

            <br>

        </div>

    </div>

    <script>
        window.$ = window.jQuery = require("jquery");
    </script>

    <script>
        getCategorias();
        getMarcas();
        document.getElementById("nombreDeLaTienda").innerHTML = localStorage['NombreTienda'] || 'Nombre de la tienda';

        $(document).ready(function() {

            $('#cancelarBtn2').click(function() {
                window.history.back();
            });

            $('#continuarBtn').click(function() {
                getAttributes();
                $('#propiedades').slideDown();
            });

            $('#guardarBtn').click(function() {
                getLastId().then(function(id) {
                    saveProduct(id);
                });
            });

        });
    </script>

</body>

</html>